<!DOCTYPE html>
<html>
<head>
    <title>Visualizza Coordinate</title>
</head>
<body>
<h1>Coordinate Condivise</h1>
<div id="coordinates">
    <p>Ottenendo le coordinate...</p>
</div>

<script>
    function fetchCoordinates() {
        fetch('http://127.0.0.1:5000/get_locations')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }
                return response.json();
            })
            .then(data => {
                var coordinatesDiv = document.getElementById('coordinates');
                coordinatesDiv.innerHTML = ''; // Pulisce il contenuto precedente

                if (data.length === 0) {
                    coordinatesDiv.innerHTML = '<p>Nessuna coordinata trovata.</p>';
                } else {
                    data.forEach(location => {
                        var p = document.createElement('p');
                        p.innerHTML = `Lat: ${location[0]}, Lng: ${location[1]}, Time: ${location[2]}`;
                        coordinatesDiv.appendChild(p);
                    });
                }
            })
            .catch(error => {
                console.error('Errore:', error);
                var coordinatesDiv = document.getElementById('coordinates');
                coordinatesDiv.innerHTML = '<p>Errore nel caricamento delle coordinate.</p>';
            });
    }

    window.onload = fetchCoordinates;
</script>
</body>
</html>
